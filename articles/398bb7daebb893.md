---
title: "A Tour of Go ã‚’ã‚„ã£ã¦ã¿ãŸ"
emoji: "ğŸ’»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Go, Tutorial,]
published: false
---

## 1. æ¦‚è¦

Goè¨€èªãŒåˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒå¢—åŠ å‚¾å‘ã®ã‚ˆã†ãªã®ã§å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã‚‚ã‚ã‚‹ã€ŒA Tour of Goã€ã§ã‚ã‚‹ç¨‹åº¦å­¦ã‚“ã§ã¿ãŸã„ã¨æ€ã†ã€‚

:::details Welcome!

## 2. Welcome!

ä»Šå›ã¯1å›ç›®ã®ã€ŒWelcome!ã€ã‚’è¡Œã†ã€‚

https://go-tour-jp.appspot.com/welcome/1

### 2.1. Wello World

ã¨ã‚Šã‚ãˆãšå®Ÿè¡Œã—ã¦ã¿ãªã•ã„ã¨è¨€ã‚ã‚ŒãŸã®ã§å®Ÿè¡Œã—ã¾ã—ãŸã€‚

```go:hello.go
package main

import "fmt"

func main() {
	fmt.Println("Hello, ä¸–ç•Œ")
}
```
```:Run
Hello, ä¸–ç•Œ
```

æ—¥æœ¬èªè¨³ç‰ˆãªã®ã§ã€ŒHello, Worldã€ã§ã¯ãªãã€ŒHello, ä¸–ç•Œã€ã¨ãªã£ã¦ã„ã¾ã™ãŒã€ãã‚Œã¯æ°—ã«ã™ã‚‹å•é¡Œã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### 2.2. Go local

Go Tourã¯è‹±èªä»¥å¤–ã«ã‚‚ãƒ‰ã‚¤ãƒ„èªã‚„ä¸­å›½èªã€éŸ“å›½èªç­‰ã€ã•ã¾ã–ã¾ãªè¨€èªã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚

### 2.3. Go offline

ä»Šå›ç§ã¯ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

[Goã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://go.dev/dl/)ã‚’ã—ã¦ã€`go tool tour`ã¨å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å®Ÿè¡ŒãŒå¯èƒ½ã«ãªã‚‹ã‚ˆã†ã§ã™ã€‚

### 2.4. The Go Playground

ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Ÿè¡Œã™ã‚‹æ™‚ã¯å¸¸ã«`2009-11-10 23:00:00 UTC`ã‚‰ã—ã„ã§ã™ã€‚ã“ã‚Œã§åŒä¸€ã®å®Ÿè¡Œçµæœã‚’å¾—ã‚‹ã“ã¨ãŒå®¹æ˜“ã«ãªã‚‹ã‚“ã§ã™ã­ã€‚å®Ÿè¡Œçµæœã«ã‚‚ç¾ã‚Œã¦ã„ã¾ã™ã€‚
å¸¸ã«æœ€æ–°ã®å®‰å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ©ç”¨ã§ãã‚‹ãã†ãªã®ã§ä½•ã‚‚è€ƒãˆãšãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Ÿè¡Œã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚

```go:sandbox.go
package main

import (
	"fmt"
	"time"
)

func main() {
	fmt.Println("Welcome to the playground!")

	fmt.Println("The time is", time.Now())
}
```

```:Run
Welcome to the playground!
The time is 2009-11-10 23:00:00 +0000 UTC m=+0.000000001
```

### 2.5. ã¾ã¨ã‚
- Go Playgroundã¨ã„ã†Webã‚µãƒ¼ãƒ“ã‚¹ã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã€ãƒªãƒ³ã‚¯ã€å®Ÿè¡Œã—ã¦ã„ã‚‹
- å¸¸ã«`2009-11-10 23:00:00 UTC`ã§ã‚ã‚‹

:::

:::details Packages, variables, and functions.

## 3. Packages, variables, and functions.

### 3.1. Packages

Goã¯`package`(ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)ã§æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯`main`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚
ä»Šå›ã¯`fmt`ã¨`math/rand`ã®äºŒã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’`import`(ã‚¤ãƒ³ãƒãƒ¼ãƒˆ)ã—ã¦ã„ã¾ã™ã€‚

```go:packages.go
package main

import (
	"fmt"
	"math/rand"
)

func main() {
	fmt.Println("My favorite number is", rand.Intn(10))
}
```

```:Run
My favorite number is 7
```

Go Playgroundã§ã¯æ™‚åˆ»ãŒä¸€å®šãªã®ã§ãƒ©ãƒ³ãƒ€ãƒ ã«ç”Ÿæˆã™ã‚‹`rand`ã‚’ç”¨ã„ã¦ã‚‚å‡ºåŠ›çµæœã¯ä¸€å®š(7)ã¨ãªã‚Šã¾ã™ã€‚



### 3.2. Imports

æ‹¬å¼§ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦ãŠã‚Šã€å…¬å¼ã«ã‚‚ã“ã®è¨˜æ³•(factored import statement)ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¤‡æ•°ã®importæ–‡ã‚’æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚

`import "fmt"`
`import "math"`

```go:imports.go
package main

import (
	"fmt"
	"math"
)

func main() {
	fmt.Printf("Now you have %g problems.\n", math.Sqrt(7))
}
```
```:Run
Now you have 2.6457513110645907 problems.
```

### 3.3. Exported names

ä¸€æ–‡å­—ç›®ãŒå¤§æ–‡å­—ã§å§‹ã¾ã‚‹åå‰ã¯å¤–éƒ¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰å‚ç…§ã•ã‚ŒãŸåå‰(exported name)ã§ã™ã€‚
åå¯¾ã«å°æ–‡å­—ã§å§‹ã¾ã‚‹åå‰ã¯å¤–éƒ¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

ãã“ã§ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚

```go:exported-names.go
package main

import (
	"fmt"
	"math"
)

func main() {
	fmt.Println(math.pi)
}
```

```:Run
./prog.go:9:19: undefined: math.pi
```

ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã€Œmath.piã¯å®šç¾©ã•ã‚Œã¦ãªã„ã‚ˆã€ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚å°æ–‡å­—ã‹ã‚‰å§‹ã¾ã‚‹åå‰ã¯å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰å‚ç…§ã§ãã¾ã›ã‚“ã®ã§ã€`math.Pi`ã«å¤‰æ›´ã—ã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚

```diff go:exported-names.go
package main

import (
	"fmt"
	"math"
)

func main() {
-	fmt.Println(math.pi)
+	fmt.Println(math.Pi)
}
```
```:Run
3.141592653589793
```

ç„¡äº‹ã«å††å‘¨ç‡ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚

### 3.4. Functions

ä»Šå›ã®addé–¢æ•°ã¯intå‹ã®2ã¤ã®å¼•æ•°ã‚’å–ã‚Šã¾ã™ãŒã€**å¤‰æ•°åã®å¾Œã‚**ã«å‹åã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```go:functions.go
package main

import "fmt"

func add(x int, y int) int {
	return x + y
}

func main() {
	fmt.Println(add(42, 13))
}
```
```:Run
55
```

42+13ã®çµæœãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚

### 3.5. Functions continued

è¤‡æ•°ã®å¼•æ•°ã®å‹ãŒåŒä¸€ã®æ™‚ã€æœ€å¾Œã ã‘æ®‹ã—ã¦çœç•¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

```diff go:functions-continued.go
package main

import "fmt"

-func add(x int, y int) int {
+func add(x, y int) int {
	return x + y
}

func main() {
	fmt.Println(add(42, 13))
}
```
```:Run
55
```

### 3.6. Multiple results

è¤‡æ•°ã®æˆ»ã‚Šå€¤ã‚’è¿”ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
ä»¥ä¸‹ã®swapé–¢æ•°ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚

```go:multiple-result.go
package main

import "fmt"

func swap(x, y string) (string, string) {
	return y, x
}

func main() {
	a, b := swap("hello", "world")
	fmt.Println(a, b)
}
```
```:Run
world hello
```

ã“ã®ã‚ˆã†ã«ã€a,bãã‚Œãã‚Œã«ä»£å…¥ã§ãã¦ã„ã¾ã™ã€‚

### 3.7. Named return values

æˆ»ã‚Šå€¤ã¨ãªã‚‹å¤‰æ•°ã«åå‰ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã†ã™ã‚‹ã“ã¨ã§ã€returnã®ã¿ã§å€¤ã‚’è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚('naked return')
é•·ã„é–¢æ•°ã§åˆ©ç”¨ã™ã‚‹ã¨èª­ã¿ã‚„ã™ã•ã«æ‚ªå½±éŸ¿ã‚’ä¸ãˆã‚‹ãŸã‚ã€çŸ­ã„é–¢æ•°ã§ã®ã¿åˆ©ç”¨ã™ã‚‹ã¹ãã§ã™ã€‚

```go:named-result.go
package main

import "fmt"

func split(sum int) (x, y int) {
	x = sum * 4 / 9
	y = sum - x
	return
}

func main() {
	fmt.Println(split(17))
}
```
```:Run
7 10
```

### 3.8. Variables

varæ–‡ã¯å¤‰æ•°ã‚’å®£è¨€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚‚é–¢æ•°ã®å¼•æ•°ã¨åŒæ§˜ã«å¤‰æ•°åã®æœ€å¾Œã«å‹åã‚’æ›¸ãã“ã¨ã§çœç•¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```go:variables.go
package main

import "fmt"

var c, python, java bool

func main() {
	var i int
	fmt.Println(i, c, python, java)
}
```
```:Run
0 false false false
```

ã”è¦§ã®é€šã‚Šã€é–¢æ•°å†…ã§ã‚‚varæ–‡ã¯åˆ©ç”¨å¯èƒ½ã§ã™ã€‚

### 3.9. Variables with initializers

varã§å¤‰æ•°ã‚’å®£è¨€ã™ã‚‹éš›ã«åˆæœŸåŒ–å­ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®éš›ã€å‹ã‚’çœç•¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```go:variables-with-initializers.go
package main

import "fmt"

var i, j int = 1, 2

func main() {
	var c, python, java = true, false, "no!"
	fmt.Println(i, j, c, python, java)
}
```
```:Run
1 2 true false no!
```
mainé–¢æ•°å†…ã§ã¯å‹å®£è¨€ã‚’ã—ã¦ã„ã¾ã›ã‚“ãŒã€åˆæœŸåŒ–å­ã‚’ä¸ãˆã‚‹ã“ã¨ã§å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã™ã€‚

### 3.10. Short variable declarations

**é–¢æ•°ã®ä¸­ã§ã®ã¿**varã®ä»£ã‚ã‚Šã«`:=`ã®æš—é»™çš„ãªå‹å®£è¨€ãŒå¯èƒ½ã§ã™ã€‚

```go short-variable-declarations
package main

import "fmt"

func main() {
	var i, j int = 1, 2
	k := 3
	c, python, java := true, false, "no!"

	fmt.Println(i, j, k, c, python, java)
}
```
```:Run
1 2 3 true false no!
```

### 3.11. Basic types

åŸºæœ¬å‹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚
```
bool

string

int  int8  int16  int32  int64
uint uint8 uint16 uint32 uint64 uintptr

byte // uint8 ã®åˆ¥å

rune // int32 ã®åˆ¥å
     // Unicode ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¡¨ã™

float32 float64

complex64 complex128
```

```go:basec-types.go
package main

import (
	"fmt"
	"math/cmplx"
)

var (
	ToBe   bool       = false
	MaxInt uint64     = 1<<64 - 1
	z      complex128 = cmplx.Sqrt(-5 + 12i)
)

func main() {
	fmt.Printf("Type: %T Value: %v\n", ToBe, ToBe)
	fmt.Printf("Type: %T Value: %v\n", MaxInt, MaxInt)
	fmt.Printf("Type: %T Value: %v\n", z, z)
}
```
```:Run
Type: bool Value: false
Type: uint64 Value: 18446744073709551615
Type: complex128 Value: (2+3i)
```

### 3.12. Zero values

å¤‰æ•°ã«åˆæœŸå€¤ã‚’ä¸ãˆãªã„å ´åˆã¯ã‚¼ãƒ­å€¤ãŒä»£å…¥ã•ã‚Œã¾ã™ã€‚

| å‹       | å€¤    |
| -------- | ----- |
| æ•´æ•°å‹   | 0     |
| boolå‹   | false |
| stringå‹ | ""    |

```go:zero.go
package main

import "fmt"

func main() {
	var i int
	var f float64
	var b bool
	var s string
	fmt.Printf("%v %v %v %q\n", i, f, b, s)
}
```
```:Run
0 0 false ""
```

### 3.13. Type conversions

å¤‰æ•°`v`ã€å‹`T`ãŒã‚ã£ãŸæ™‚ã€å‹å¤‰æ›ã¯`T(v)`ã§è¡Œã„ã¾ã™ã€‚

```go:type-conversions.go
package main

import (
	"fmt"
	"math"
)

func main() {
	var x, y int = 3, 4
	var f float64 = math.Sqrt(float64(x*x + y*y))
	var z uint = uint(f)
	fmt.Println(x, y, z)
}
```
```:Run
3 4 5
```

ä»¥ä¸‹ã®ã‚ˆã†ã«çœç•¥ã—ã¦è¨˜è¿°ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```diff go:type-conversions.go
package main

import (
	"fmt"
	"math"
)

func main() {
-	var x, y int = 3, 4
-	var f float64 = math.Sqrt(float64(x*x + y*y))
-	var z uint = uint(f)
+	x, y  := 3, 4
+	f := math.Sqrt(float64(x*x + y*y))
+	z := uint(f)
	fmt.Println(x, y, z)
}
```
```:Run
3 4 5
```

### 3.14. Type inference

`:=`ã‚„`var =`ç­‰ã§æ˜ç¤ºçš„ãªå‹ã‚’æŒ‡å®šã—ãªã„å ´åˆã€å³å´ã®å¤‰æ•°ã‹ã‚‰å‹æ¨è«–ã•ã‚Œã¾ã™ã€‚
å‹ã‚’æŒ‡å®šã—ãªã„æ•°å€¤ã§ã‚ã‚‹å ´åˆã€å³å´ã®å®šæ•°ã®ç²¾åº¦ã«åŸºã¥ã„ã¦`int`,`float64`,`complex128`ã«ãªã‚Šã¾ã™ã€‚

```go:type-inference.go
package main

import "fmt"

func main() {
	v := 42 // change me!
	fmt.Printf("v is of type %T\n", v)
}
```
```:Run
v is of type int
```

`change me!`ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ãŸã‚3.14ã«å¤‰æ›´ã—ã¦ã¿ã¾ã™ã€‚


```diff go:type-inference.go
package main

import "fmt"

func main() {
-	v := 42 // change me!
+	v := 3.14 // change me!
	fmt.Printf("v is of type %T\n", v)
}
```
```:Run
v is of type float64
```

`int`ã‹ã‚‰`float64`ã«å¤‰ã‚ã‚Šã¾ã—ãŸã€‚

### 3.15. Constants

å®šæ•°ã¯`const`ã‚’ç”¨ã„ã¦å®£è¨€ã—ã¾ã™ã€‚
ãŸã ã—ã€`:=`ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

```go:constants.go
package main

import "fmt"

const Pi = 3.14

func main() {
	const World = "ä¸–ç•Œ"
	fmt.Println("Hello", World)
	fmt.Println("Happy", Pi, "Day")

	const Truth = true
	fmt.Println("Go rules?", Truth)
}
```
```:Run
Hello ä¸–ç•Œ
Happy 3.14 Day
Go rules? true
```

### 3.16. Numeric Constants

å‹ã®ãªã„å®šæ•°ã¯çŠ¶æ³ã«ã‚ˆã‚Šå¿…è¦ãªå‹ã‚’å–ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã€`Big`,`Small`ã«å‹ãŒå®£è¨€ã•ã‚Œã¦ã„ãªã„ãŸã‚è¨ˆç®—çµæœã«ã‚ˆã‚Šå‹ãŒå¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚

```go:numeric-constants.go
package main

import "fmt"

const (
	// Create a huge number by shifting a 1 bit left 100 places.
	// In other words, the binary number that is 1 followed by 100 zeroes.
	Big = 1 << 100
	// Shift it right again 99 places, so we end up with 1<<1, or 2.
	Small = Big >> 99
)

func needInt(x int) int { return x*10 + 1 }
func needFloat(x float64) float64 {
	return x * 0.1
}

func main() {
	fmt.Println(needInt(Small))
	fmt.Println(needFloat(Small))
	fmt.Println(needFloat(Big))
}
```

 ```:Run
21
0.2
1.2676506002282295e+29
 ```

ã¡ãªã¿ã«`needInt(Big)`ã¨ã™ã‚‹ã¨å€¤ãŒå¤§ãããªã‚Šã™ãã¦ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã—ã‚¨ãƒ©ãƒ¼ãŒå‡ºåŠ›ã•ã‚Œã¾ã—ãŸã€‚

### 3.17. ã¾ã¨ã‚

- Goã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯`package`(ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)ã§æ§‹æˆã•ã‚Œã‚‹
- ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¯mainé–¢æ•°
- å¤§æ–‡å­—ã‹ã‚‰å§‹ã¾ã‚‹åå‰**ã ã‘**å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
- å‹åã¯**å¤‰æ•°ã®å¾Œã‚**ã«æ›¸ã
- åŒã˜å‹ã®å¼•æ•°ãŒè¤‡æ•°ã‚ã‚‹å ´åˆå‹ã®å®£è¨€ã¯æœ€å¾Œã ã‘æ®‹ã—ã¦çœç•¥ã§ãã‚‹
- æˆ»ã‚Šå€¤ã¨ãªã‚‹å¤‰æ•°ã«åå‰ã‚’ã¤ã‘ã‚‹ã“ã¨ã§returnæ–‡ã«ä½•ã‚‚æ›¸ã‹ãªãã¦ã‚‚è‰¯ããªã‚‹
- varæ–‡ã§å¤‰æ•°ã‚’å®£è¨€ã—ã€å¼•æ•°åŒæ§˜å‹å®£è¨€ã®çœç•¥ã‚‚å¯èƒ½
- åˆæœŸåŒ–å­ã‚’ä¸ãˆã‚‹ã“ã¨ã§å‹å®£è¨€ã‚’çœç•¥å¯èƒ½
- **é–¢æ•°ã®ä¸­ã§ã®ã¿**varã®ä»£ã‚ã‚Šã«`:=`ã®æš—é»™çš„ãªå‹å®£è¨€ãŒå¯èƒ½ã§ã™
- å¤‰æ•°ã«åˆæœŸå€¤ã‚’ä¸ãˆãªã„å ´åˆã€ã‚¼ãƒ­å€¤ãŒä»£å…¥ã•ã‚Œã‚‹
- å¤‰æ•°`v`ã€å‹`T`ãŒã‚ã£ãŸæ™‚ã€å‹å¤‰æ›ã¯`T(v)`ã§è¡Œã†
- `:=`ã‚„`var =`ç­‰ã§æ˜ç¤ºçš„ãªå‹ã‚’æŒ‡å®šã—ãªã„å ´åˆã€å³å´ã®å¤‰æ•°ã‹ã‚‰å‹æ¨è«–ã•ã‚Œã‚‹
- å®šæ•°ã¯`const`ã‚’ç”¨ã„ã¦å®£è¨€ã§ãã‚‹ãŒã€`:=`ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚
- å‹ã®ãªã„å®šæ•°ã¯çŠ¶æ³ã«ã‚ˆã‚Šå¿…è¦ãªå‹ã‚’å–ã‚‹ã“ã¨ã«ãªã‚‹ã€‚

:::

:::details Flow control statements: for, if, else, switch and defer

## Flow control statements: for, if, else, switch and defer

### For

foræ–‡ã¯ã€åˆæœŸåŒ–ãƒ»æ¡ä»¶ãƒ»å¾Œå‡¦ç†ã®3ã¤ã®å‡¦ç†ãŒã‚»ãƒŸã‚³ãƒ­ãƒ³`;`ã§åˆ†ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
Cã‚„Javaç­‰ã®è¨€èªã¨ã®é•ã„ã¨ã—ã¦ã€ãã‚Œã‚‰ã‚’å›²ã†ä¸¸æ‹¬å¼§`()`ãŒå¿…è¦ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚

```go:for.go
package main

import "fmt"

func main() {
	sum := 0
	for i := 0; i < 10; i++ {
		sum += i
	}
	fmt.Println(sum)
}
```
```:Run
45
```

### For continued

åˆæœŸåŒ–ã¨å¾Œå‡¦ç†ã¯ä»»æ„ã§ã™ã€‚
ä¸è¦ãªå ´åˆã¯`;`ã®ã¿è¨˜è¿°ã—ã¾ã™ã€‚

```diff go:for-continued.go
package main

import "fmt"

func main() {
	sum := 1
-	for i := 0; i < 10; i++ {
+	for ; sum < 1000; {
		sum += sum
	}
	fmt.Println(sum)
}
```
```:Run
1024
```

### For is Go's "while"

ãªã‚“ãªã‚‰ã€`;`ã‚’çœç•¥ã™ã‚‹ã“ã¨ã ã£ã¦ã§ãã¦ã—ã¾ã„ã¾ã™ã€‚ã¤ã¾ã‚ŠCè¨€èªç­‰ã®whileæ–‡ã¯Goè¨€èªã«ãŠã‘ã‚‹foræ–‡ã§ã‚ã‚‹ã®ã§ã™ã€‚

```diff go:for-is-gos-while.go
package main

import "fmt"

func main() {
	sum := 1
-	for ; sum < 1000; {
+	for sum < 1000 {
		sum += sum
	}
	fmt.Println(sum)
}
```
```:Run
1024
```

### Forever

æ¡ä»¶å¼ã‚’çœç•¥ã™ã‚‹ã¨ç„¡é™ãƒ«ãƒ¼ãƒ—ã¨ãªã‚Šã¾ã™ã€‚

```go:forever.go
package main

func main() {
	for {
	}
}
```
```:Run
```

### If

ifæ–‡ã«ã¯foræ–‡åŒæ§˜ã«ä¸¸æ‹¬å¼§`()`ãŒå¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚

```go:if.go
package main

import (
	"fmt"
	"math"
)

func sqrt(x float64) string {
	if x < 0 {
		return sqrt(-x) + "i"
	}
	return fmt.Sprint(math.Sqrt(x))
}

func main() {
	fmt.Println(sqrt(2), sqrt(-4))
}
```
```:Run
1.4142135623730951 2i
```

### If with a short statement

foræ–‡ã®ã‚ˆã†ã«æ¡ä»¶å¼ã®å‰ã«ç°¡å˜ãªæ–‡ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```go:if-with-a-short-statement
package main

import (
	"fmt"
	"math"
)

func pow(x, n, lim float64) float64 {
	if v := math.Pow(x, n); v < lim {
		return v
	}
	return lim
}

func main() {
	fmt.Println(
		pow(3, 2, 10),
		pow(3, 3, 20),
	)
}
```
```:Run
9 20
```

### If and else

ifæ–‡ã§å®£è¨€ã•ã‚ŒãŸå¤‰æ•°ã¯elseæ–‡ã§ã‚‚ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```go:if-and-else.go
package main

import (
	"fmt"
	"math"
)

func pow(x, n, lim float64) float64 {
	if v := math.Pow(x, n); v < lim {
		return v
	} else {
		fmt.Printf("%g >= %g\n", v, lim)
	}
	// can't use v here, though
	return lim
}

func main() {
	fmt.Println(
		pow(3, 2, 10),
		pow(3, 3, 20),
	)
}
```
```:Run
27 >= 20
9 20
```

ãªãŠã€mainé–¢æ•°ã®`Println`ã¯å…ˆã«powé–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã¦ã‹ã‚‰å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€powé–¢æ•°ã®`Printf`ãŒå…ˆã«å®Ÿè¡Œã•ã‚Œã€ãã®å¾Œ`9 20`ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚

### Exercise: Loops and Functions

é–¢æ•°ã¨ãƒ«ãƒ¼ãƒ—ã‚’åˆ©ç”¨ã—ã¦å¹³æ–¹æ ¹ã‚’è¨ˆç®—ã—ã¦ã¿ã¾ã™ã€‚æ•°å€¤`x`ãŒä¸ãˆã‚‰ã‚ŒãŸæ™‚ã«å¹¾ã¤ã‹ã®`z`ã‚’æ¨æ¸¬ã—ã€`z^2`ãŒã©ã‚Œã ã‘`x`ã«è¿‘ã¥ã„ãŸã‹ã«å¿œã˜ã¦`z`ã‚’èª¿ç¯€ã§ãã¾ã™ã€‚

```go:exercise-loops-and-functions.go
package main

import (
	"fmt"
)

func Sqrt(x float64) float64 {
}

func main() {
	fmt.Println(Sqrt(2))
}
```

#### è§£ç­”ä¾‹

`math`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦å‡ºåŠ›ã‚’æ¯”è¼ƒã—ã¦ã¿ã¾ã—ãŸã€‚

```diff go:exercise-loops-and-functions.go
package main

import (
	"fmt"
+	"math"
)

func Sqrt(x float64) float64 {
+	z := 1.0
+	for i := 0; i < 10; i++ {
+		z -= (z*z - x) / (2*z)
+	}
+	return z
}

func main() {
	fmt.Println(Sqrt(2))
+	fmt.Println(math.Sqrt(2))
}
```

### Switch

switchæ–‡ã¯`if-else`æ–‡ã‚’çŸ­ãæ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

ä»–è¨€èªã¨æ¯”è¼ƒã—ã¦Goè¨€èªã¯ã€é¸æŠã•ã‚ŒãŸ`case`ã®ã¿å®Ÿè¡Œã—ãã®ä»–ã®`case`ã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚ã¾ãŸã€æœ€å¾Œã«å¿…è¦ãª`break`ã‚‚è‡ªå‹•ã§æä¾›ã•ã‚Œã‚‹ãŸã‚å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚
ã•ã‚‰ã«ã€`case`ã¯**å®šæ•°ã§ã‚‚æ•´æ•°ã§ã‚‚ãªãã¦è‰¯ã„**ã®ã§ã™ã€‚

```go:switch.go
package main

import (
	"fmt"
	"runtime"
)

func main() {
	fmt.Print("Go runs on ")
	switch os := runtime.GOOS; os {
	case "darwin":
		fmt.Println("OS X.")
	case "linux":
		fmt.Println("Linux.")
	default:
		// freebsd, openbsd,
		// plan9, windows...
		fmt.Printf("%s.\n", os)
	}
}
```
```:Run
Go runs on Linux.
```

### Switch evaluation order

`case`æ–‡ã¯ä¸Šã‹ã‚‰ä¸‹ã«è©•ä¾¡ã•ã‚Œã‚‹ãŸã‚ã€æ¡ä»¶ãŒä¸€è‡´ã™ã‚‹ã¨ãã“ã§`switch`æ–‡ã¯çµ‚äº†(è‡ªå‹•çš„ã«break)ã—ã¾ã™ã€‚

```go:switch-evaluation-order.go
package main

import (
	"fmt"
	"time"
)

func main() {
	fmt.Println("When's Saturday?")
	today := time.Now().Weekday()
	switch time.Saturday {
	case today + 0:
		fmt.Println("Today.")
	case today + 1:
		fmt.Println("Tomorrow.")
	case today + 2:
		fmt.Println("In two days.")
	default:
		fmt.Println("Too far away.")
	}
}
```
```:Run
When's Saturday?
Too far away.
```

ã“ã®å®Ÿè¡Œçµæœã‚’è¦‹ã‚‹ã«ã€ç«æ›œæ—¥ã‹ã‚‰é‡‘æ›œæ—¥ã®é–“ã§ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚æœãŸã—ã¦`2009-11-10 23:00:00 UTC`ã¯ä½•æ›œæ—¥ãªã®ã§ã—ã‚‡ã†ã‹ã€‚

### Switch with no condition

æ¡ä»¶ã®ãªã„`switch`æ–‡ã¯ã€`switch true`ã¨æ›¸ãã“ã¨ã¨åŒæ§˜ã§ã™ã€‚ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ã€é•·ããªã‚ŠãŒã¡ãª`if-then-else`ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«è¡¨ç¾ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚

```go:switch-with-no-condition.go
package main

import (
	"fmt"
	"time"
)

func main() {
	t := time.Now()
	switch {
	case t.Hour() < 12:
		fmt.Println("Good morning!")
	case t.Hour() < 17:
		fmt.Println("Good afternoon.")
	default:
		fmt.Println("Good evening.")
	}
}
```
```:Run
Good evening.
```

`2009-11-10 23:00:00 UTC`ã¯23æ™‚ãªã®ã§`Good evening.`ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚

### Defer

`defer`æ–‡ã¯å…ƒã®é–¢æ•°ã®å®Ÿè¡Œã‚’`return`ã™ã‚‹ã¾ã§é…å»¶ã•ã›ã¾ã™ã€‚é–¢æ•°ã®å¼•æ•°ã¯ã™ãã«è©•ä¾¡ã•ã‚Œã¾ã™ãŒã€å®Ÿè¡Œãã®ã‚‚ã®ã¯`return`ã•ã‚Œã‚‹ã¾ã§å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚

```go:defer.go
package main

import "fmt"

func main() {
	defer fmt.Println("world")

	fmt.Println("hello")
}
```
```:Run
hello
world
```

### Stacking defers

`defer`ã‚’è¤‡æ•°å›åˆ©ç”¨ã—ãŸå ´åˆã€ãã‚Œã‚‰ã¯ã‚¹ã‚¿ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚å…ƒã®é–¢æ•°ãŒ`return`ã•ã‚Œã‚‹ã¨ã€ `LIFO`(last-in-first-out)ã®é †ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

```go:defer-multi.go
package main

import "fmt"

func main() {
	fmt.Println("counting")

	for i := 0; i < 10; i++ {
		defer fmt.Println(i)
	}

	fmt.Println("done")
}
```
```:Run
counting
done
9
8
7
6
5
4
3
2
1
0
```

### ã¾ã¨ã‚
- `for`æ–‡ã«ã¯`()`ãŒå¿…è¦ãªã„
- åˆæœŸåŒ–ã¨å¾Œå‡¦ç†ã‚’çœç•¥ã—ã€ä»–è¨€èªã®whileæ–‡åŒæ§˜ã«æ‰±ã†ã“ã¨ãŒå¯èƒ½
- æ¡ä»¶å¼ã‚’çœç•¥ã™ã‚‹ã¨ç„¡é™ãƒ«ãƒ¼ãƒ—ã™ã‚‹
- `if`æ–‡ã«ã‚‚`()`ã¯å¿…è¦ãªã„
- æ¡ä»¶å¼ã®å‰ã«ç°¡å˜ãªæ–‡ã‚’è¨˜è¿°å¯èƒ½
- ãã“ã§å¾—ãŸå¤‰æ•°ã¯elseæ–‡ã§ã‚‚åˆ©ç”¨å¯èƒ½
- `switch`æ–‡ã«ã¯`break`ãŒå¿…è¦ãªã„
- `case`æ–‡ã¯**å®šæ•°ã§ã‚‚æ•´æ•°ã§ã‚‚ãªãã¦è‰¯ã„**
- `case`æ–‡ã¯ä¸Šã‹ã‚‰é †ã«è©•ä¾¡ã•ã‚Œã€ä¸€è‡´ã™ã‚‹ã¨ãã“ã§çµ‚äº†ã™ã‚‹
- æ¡ä»¶ã®ãªã„`switch`æ–‡ã¯`if-then-else`ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«è¡¨ç¾å¯èƒ½
- `defer`æ–‡ã¯å…ƒã®é–¢æ•°ã®å®Ÿè¡Œã‚’`return`ã™ã‚‹ã¾ã§é…å»¶ã•ã›ã‚‹
- è¤‡æ•°å›åˆ©ç”¨ã—ãŸå ´åˆã€ãã‚Œã‚‰ã¯ã‚¹ã‚¿ãƒƒã‚¯ã•ã‚Œã€`LIFO`ã§å®Ÿè¡Œã•ã‚Œã‚‹

:::
:::details 4
:::
:::details 5
:::
:::details 6
:::